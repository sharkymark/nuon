replicaCount: 1

tls:
  secretNames:
    - "{{ .nuon.components.certificate.outputs.public_domain_certificate_secret_name }}"

serviceAccount:
  workspacePerms: true
  enableDeployments: true

coder:
  env:
    - name: CODER_PG_CONNECTION_URL
      valueFrom:
        secretKeyRef:
          name: coder-db-url
          key: url
    - name: CODER_ACCESS_URL
      value: "https://coder.{{.nuon.install.sandbox.outputs.public_domain.name}}"
    - name: CODER_WILDCARD_ACCESS_URL
      value: "*.coder.{{.nuon.install.sandbox.outputs.public_domain.name}}"
    - name: CODER_SWAGGER_ENABLE
      value: "true"
    - name: CODER_TELEMETRY_ENABLE
      value: "true"
    - name: CODER_REDIRECT_TO_ACCESS_URL
      value: "true"
    - name: CODER_MAX_TOKEN_LIFETIME
      value: "8760h0m0s"
    - name: CODER_SESSION_DURATION
      value: "168h0m0s"
